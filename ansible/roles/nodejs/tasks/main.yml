---
# =============================================================================
# Node.js (Bootstrap Step 2 â€” Node.js portion)
# =============================================================================

- name: Install Node.js {{ nodejs_version }} (AL2023 package)
  ansible.builtin.dnf:
    name: "nodejs{{ nodejs_version }}"
    state: present
  become: true

# --- Route npm cache to NVMe when available ---

- name: Set npm cache to NVMe
  ansible.builtin.command: npm config set cache {{ nvme_mount_point }}/cache/npm
  changed_when: true
  when: nvme_available | default(false) | bool
