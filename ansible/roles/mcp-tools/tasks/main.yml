---
# =============================================================================
# mcp-tools CLI (Bootstrap Step 12)
# =============================================================================

- name: Check if mcp-tools is installed
  ansible.builtin.command: mcp-tools --version
  register: mcp_tools_check
  changed_when: false
  failed_when: false

- name: Install mcp-tools binary
  ansible.builtin.get_url:
    url: "{{ mcp_tools_url }}"
    dest: /usr/local/bin/mcp-tools
    mode: "0755"
  become: true
  when: mcp_tools_check.rc != 0
  register: mcp_tools_install
  failed_when: false

- name: Warn if mcp-tools download failed
  ansible.builtin.debug:
    msg: "mcp-tools binary not available at {{ mcp_tools_url }} â€” skipping (repo may be offline)"
  when: mcp_tools_install is defined and mcp_tools_install is failed
