# =============================================================================
# AWS Devbox - Terraform Variables
# =============================================================================
#
# Copy this file to terraform.tfvars and fill in the values.
# All secrets are stored in Bitwarden - see bottom of file.
#
# =============================================================================

# REQUIRED: Bitwarden account email
bitwarden_email = "your-email@example.com"

# REQUIRED: GitHub username (for downloading bootstrap scripts)
github_username = "your-github-username"

# Optional: Custom Tailscale hostname (default: devbox)
# tailscale_hostname = "devbox"

# Optional: Email notifications for spot interruptions
# notification_emails = ["your-email@example.com"]

# =============================================================================
# Instance Configuration (all optional - sensible defaults provided)
# =============================================================================

# Architecture: arm64 (Graviton, default) or x86_64
# Graviton offers ~20% better price/performance and often better spot availability
# architecture = "arm64"

# Instance type recommendations:
#   ARM (Graviton):  m7g.xlarge (default), c7g.xlarge (compute), r7g.xlarge (memory)
#   x86_64 (AMD):    m7a.xlarge, c7a.xlarge, r7a.xlarge
#   x86_64 (Intel):  m7i.xlarge, c7i.xlarge, r7i.xlarge
# instance_type = "m7g.xlarge"

# aws_region              = "us-east-1"
# volume_size             = 100
# volume_throughput       = 250
# hostname                = "aws-dev-box"

# =============================================================================
# Spot Instance Configuration (optional)
# =============================================================================

# use_spot              = true     # ~70% cost savings
# spot_max_price        = ""       # Empty = on-demand price cap
# spot_restart_attempts = 5

# =============================================================================
# Schedule Configuration (optional)
# =============================================================================

# enable_schedule   = true
# schedule_start    = "0 5 * * ? *"    # 5am
# schedule_stop     = "0 23 * * ? *"   # 11pm
# schedule_timezone = "America/Denver"

# =============================================================================
# BITWARDEN SECRETS SETUP
# =============================================================================
#
# Create these items in Bitwarden:
#
# REQUIRED FOR TERRAFORM APPLY:
#
# 1. devbox/tailscale-auth-key
#    - Type: Login
#    - Password field: (reusable auth key from Tailscale admin)
#    - Get from: https://login.tailscale.com/admin/settings/keys
#
# 2. devbox/tailscale-api-key
#    - Type: Login
#    - Password field: (API key for device cleanup)
#    - Get from: https://login.tailscale.com/admin/settings/keys (API access)
#
# REQUIRED FOR DEVBOX-INIT (after first SSH):
#
# 3. devbox/luks-key
#    - Type: Login
#    - Password field: (strong passphrase for LUKS encryption)
#
# 4. devbox/github-ssh-home
#    - Type: Login (or Secure Note)
#    - Custom field: "private_key" = (your home SSH private key)
#
# 5. devbox/github-ssh-work
#    - Type: Login (or Secure Note)
#    - Custom field: "private_key" = (your work SSH private key)
#
# 6. devbox/github-token
#    - Type: Login
#    - Password field: (your GitHub PAT with repo, read:org scopes)
#
# 7. devbox/git-crypt-key
#    - Type: Login (or Secure Note)
#    - Custom field: "key_b64" = (base64-encoded git-crypt key)
#
# 8. devbox/identity
#    - Type: Secure Note
#    - Custom fields for git identity (REQUIRED):
#      - "git_name_home" = (your name for personal repos)
#      - "git_email_home" = (your email for personal repos)
#      - "github_username" = (your GitHub username)
#    - Custom fields for git identity (optional):
#      - "git_name_work" = (your name for work repos)
#      - "git_email_work" = (your email for work repos)
#    - Custom fields for AWS SSO (optional):
#      - "aws_account_id" = (AWS account ID)
#      - "aws_sso_start_url" = (SSO start URL)
#      - "aws_sso_region" = (SSO region, e.g., us-east-1)
#      - "aws_role_name" = (IAM role name, e.g., AdministratorAccess)
#    - Custom fields for repos to clone (optional):
#      - "lifemaestro_repo" = (e.g., "username/lifemaestro" - cloned to ~/code/lifemaestro, runs install.sh)
#      - "claude_sessions_repo" = (e.g., "username/claude-sessions-config")
#
# OPTIONAL (for Google email + calendar):
#
# 9. devbox/gmail-oauth
#    - Type: Login
#    - Username: your.email@gmail.com
#    - Custom field: "client_id" = (Google OAuth client ID)
#    - Custom field: "client_secret" = (Google OAuth client secret)
#
# To get Gmail OAuth credentials:
#   1. Go to https://console.cloud.google.com/
#   2. Create project → APIs & Services → Enable Gmail API + Calendar API
#   3. Credentials → Create OAuth Client ID (Desktop app)
#   4. Copy client ID and secret to Bitwarden
#   5. After devbox-init, run:
#      - himalaya account configure gmail
#      - gcalcli init
#
# OPTIONAL (for MS365 email + calendar):
#
# 10. devbox/ms365-oauth
#    - Type: Login
#    - Username: your.email@company.com
#    - Custom field: "client_id" = (Azure AD application client ID)
#    - Custom field: "client_secret" = (Azure AD client secret)
#    - Custom field: "tenant_id" = (Azure AD tenant ID)
#
# To get MS365 OAuth credentials:
#   1. Go to https://portal.azure.com/
#   2. Azure AD → App registrations → New registration
#   3. Name: "Devbox CLI", Redirect URI: http://localhost (Web)
#   4. Note client ID and tenant ID
#   5. Certificates & secrets → New client secret
#   6. API permissions → Add:
#      - IMAP.AccessAsUser.All, SMTP.Send, Calendars.ReadWrite, offline_access
#   7. Grant admin consent
#   8. Copy credentials to Bitwarden
#   9. After devbox-init, run:
#      - himalaya account configure ms365
#      - thallo authorize
#
# To get the git-crypt key:
#   cd ~/.config/claude-sessions
#   git-crypt export-key /dev/stdout | base64 -w0
#
# To get SSH keys:
#   cat ~/.ssh/id_ed25519_home
#   cat ~/.ssh/id_ed25519_work
#
# =============================================================================
